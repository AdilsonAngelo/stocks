String.prototype.replaceAll=function(c,d){return this.split(c).join(d)};var stocks,table;$.ajax('https://fundamentusapi.herokuapp.com/',{type:'GET',async:!0}).then(c=>{for(let e in stocks=[],c)if(c.hasOwnProperty(e)){let f=c[e];f.tick=e,stocks.push(f)}for(let e of stocks)for(let f in e)e.hasOwnProperty(f)&&'tick'!=f&&(e[f]=parseFloat(e[f].replaceAll('.','').replace(',','.')));stocks=stocks.filter(e=>1e8<e['Liq.2m.']),stocks.sort((e,f)=>e.ROIC>f.ROIC?-1:e.ROIC<f.ROIC?1:0);let d=1;for(let e of stocks)e.greenblatt=d,d++;stocks.sort((e,f)=>e['EV/EBIT']<f['EV/EBIT']?-1:e['EV/EBIT']>f['EV/EBIT']?1:0),d=1;for(let e of stocks)e.greenblatt+=d,d++;stocks.sort((e,f)=>e.greenblatt<f.greenblatt?-1:e.greenblatt>f.greenblatt?1:0),d=1;for(let e of stocks)$('#result tbody').append('<tr><td>'+d+'</td><td>'+e.tick+'</td><td>R$ '+real.format(e.cotacao)+'</td><td>'+e['P/L']+'</td><td>'+e.DY+'% </td><td>'+e.ROIC+'% </td><td>'+e.ROE+'% </td><td>'+real.format(e['Pat.Liq'])+'</td><td>'+e['EV/EBIT']+'</td><td>'+real.format(e['Liq.2m.'])+'</td><td>'+e.greenblatt+'</td></tr>'),d++;table=$('#result').DataTable({responsive:!0,fixedHeader:!0,keys:!0,select:!0})}).catch(c=>console.error(c));var real=new Intl.NumberFormat('pt-BR',{currency:'BRL',minimumFractionDigits:2});